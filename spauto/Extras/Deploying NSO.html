<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Deploying NSO (Local install) &mdash; Devnet SPAUTO 0.1.0 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Changelog" href="../../changelog.html" />
    <link rel="prev" title="Extras" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Devnet SPAUTO
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../README.html">Readme</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Automation%20APIs%20and%20Protocols/index.html">Automation APIs and Protocols</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Network%20Device%20Programmability/index.html">Network Device Programmability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Network%20Programmability%20Foundation/index.html">Network Programmability Foundation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Extras</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Deploying NSO (Local install)</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">Changelog</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../autoapi/index.html">API Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Devnet SPAUTO</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Extras</a></li>
      <li class="breadcrumb-item active">Deploying NSO (Local install)</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/spauto/Extras/Deploying NSO.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="deploying-nso-local-install">
<h1>Deploying NSO (Local install)<a class="headerlink" href="#deploying-nso-local-install" title="Permalink to this heading"></a></h1>
<section id="installing-nso-evaluation-version-v5-5">
<h2>Installing NSO Evaluation Version (v5.5)<a class="headerlink" href="#installing-nso-evaluation-version-v5-5" title="Permalink to this heading"></a></h2>
<p>For my studies, I decided to deploy an Ubuntu VM to host an NSO instance. Keep in mind there are several ways to take advantage of NSO. Within a CI/CD pipeline, as a docker container, a full blown production server and as a local install. An evaluation version has recently been released and is free to download.</p>
<p>Head on over to the following site and get the installer files.</p>
<p><a class="reference external" href="https://developer.cisco.com/docs/nso/#!getting-and-installing-nso/download-your-nso-free-trial-installer-and-cisco-neds">NSO Eval</a></p>
<p>Although the EVAL version comes with a variety of NEDs included, go ahead and download the latest available NEDS as well. You will need a DevNet account to log in and download.</p>
<p>Later on, we will cover how to set up NSO in a docker container which is useful for CI/CD.</p>
<p><a class="reference external" href="https://github.com/NSO-developer/nso-docker">NSO Docker</a></p>
<p>At this point, you should have downloaded a local copy of the eval version on your machine. I will assume that you have a fresh install of Ubuntu 20.04 server running.</p>
<p>Our VM will have 2 CPU’s and 4GB of ram. This should be plenty for our operations, although more RAM may be required if we add all 17 routers, as documentation suggests. We will be doing a Local Install on our remote server which allows the creation of multiple, unrelated NSO instances in one host.</p>
</section>
<section id="getting-started">
<h2>Getting started<a class="headerlink" href="#getting-started" title="Permalink to this heading"></a></h2>
<p>I won’t bore you with the details, but the first step is to SCP the .bin file for the NSO appliance and any other NEDs you may have downloaded to our VM.</p>
<p>Start with a system package update and then lets make sure we have the following installed:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>default-jdk<span class="w"> </span><span class="o">&amp;&amp;</span><span class="se">\</span>
python3-pip<span class="w"> </span><span class="o">&amp;&amp;</span><span class="se">\</span>
</pre></div>
</div>
<p>Now install paramiko via pip</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip3<span class="w"> </span>install<span class="w"> </span>paramiko<span class="w"> </span>
</pre></div>
</div>
<p>It’s recommended to install our NSO instance in our HOME directory. But we must first unpack all the contents of our NSO .bin file.</p>
<p>Change directory to where you SCP’d the files onto the remote server and perform the following:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sh<span class="w"> </span>nso-5.5.linux.x86_64.signed.bin<span class="w"> </span>--skip-verification
</pre></div>
</div>
<p>Now that the files are unpacked, lets go ahead and install a local instance in our home directory. We are able to install several different instances this way. Only one of our instances can be running at any given time, but if you would like to have more than one, just simply create more with different names.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sh<span class="w"> </span>nso-5.5.linux.x86_64.installer.bin<span class="w"> </span><span class="nv">$HOME</span>/ncs-5.5<span class="w"> </span>--local-install
</pre></div>
</div>
<p>Finally, set up our env</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span><span class="w"> </span><span class="nv">$HOME</span>/ncs-5.5/ncsrc
ncs-setup<span class="w"> </span>--dest<span class="w"> </span><span class="nv">$HOME</span>/ncs-run
</pre></div>
</div>
<p>Now back out to the root dir where we installed our local instance and run the NCS server from the ncs-run directory.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">..</span>
<span class="n">cd</span> <span class="n">ncs</span><span class="o">-</span><span class="n">run</span>
<span class="n">ncs</span>
</pre></div>
</div>
</section>
<section id="example">
<h2>Example:<a class="headerlink" href="#example" title="Permalink to this heading"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>htinoco@nso-dev-example:~$ cd NSO-Files/

htinoco@nso-dev-example:~/NSO-Files$ sh nso-5.5.linux.x86_64.installer.bin $HOME/ncs-5.5 --local-install
INFO  Using temporary directory /tmp/ncs_installer.12458 to stage NCS installation bundle
INFO  Unpacked ncs-5.5 in /home/htinoco/ncs-5.5
INFO  Found and unpacked corresponding DOCUMENTATION_PACKAGE
INFO  Found and unpacked corresponding EXAMPLE_PACKAGE
INFO  Found and unpacked corresponding JAVA_PACKAGE
INFO  Generating default SSH hostkey (this may take some time)
INFO  SSH hostkey generated
INFO  Environment set-up generated in /home/htinoco/ncs-5.5/ncsrc
INFO  NSO installation script finished
INFO  Found and unpacked corresponding NETSIM_PACKAGE
INFO  NCS installation complete
htinoco@nso-dev-example:~/NSO-Files$ 
htinoco@nso-dev-example:~/NSO-Files$ source $HOME/ncs-5.5/ncsrc
htinoco@nso-dev-example:~/NSO-Files$ ncs-setup --dest $HOME/ncs-run
htinoco@nso-dev-example:~/NSO-Files$ 
htinoco@nso-dev-example:~/NSO-Files$ cd ..
htinoco@nso-dev-example:~$ cd ncs-run/
htinoco@nso-dev-example:~/ncs-run$ ncs
htinoco@nso-dev-example:~/ncs-run$ 
</pre></div>
</div>
</section>
<section id="installing-additional-neds">
<h2>Installing Additional NEDS<a class="headerlink" href="#installing-additional-neds" title="Permalink to this heading"></a></h2>
<p>Although NSO instance comes pre-packaged with several NEDs available, there are a couple different free eval versions available for download through the DevNet website as well.</p>
<p><a class="reference external" href="https://developer.cisco.com/docs/nso/#!getting-and-installing-nso/download-your-nso-free-trial-installer-and-cisco-neds">NSO Files / Neds</a></p>
<p>NEDS are Network Element Drivers, which NSO uses to communicate with different vendor devices.</p>
<p>Lets go through installing our additional NEDS we’ve downloaded for Cisco IOSXR &amp; XE.</p>
<hr class="docutils" />
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>htinoco@nso-dev-example:~/NSO-Files/neds$ tree
.
├── ncs-5.5-cisco-ios-6.69.1.signed.bin
└── ncs-5.5-cisco-iosxr-7.33.1.signed.bin

0 directories, 2 files
</pre></div>
</div>
<p>Notice these files are also signed .bin</p>
</section>
<section id="unpack-the-files-skip-verification">
<h2>Unpack the files (Skip verification)<a class="headerlink" href="#unpack-the-files-skip-verification" title="Permalink to this heading"></a></h2>
<p>Just like our NSO installer file, we have to unpack the contents of the files.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>htinoco@nso-dev-example:~/NSO-Files/neds$ sh ncs-5.5-cisco-iosxr-7.33.1.signed.bin --skip-verification
Unpacking...
htinoco@nso-dev-example:~/NSO-Files/neds$ sh ncs-5.5-cisco-ios-6.69.1.signed.bin --skip-verification
Unpacking...
htinoco@nso-dev-example:~/NSO-Files/neds$ tree
.
├── cisco_x509_verify_release.py
├── cisco_x509_verify_release.py3
├── ncs-5.5-cisco-ios-6.69.1.signed.bin
├── ncs-5.5-cisco-ios-6.69.1.tar.gz
├── ncs-5.5-cisco-ios-6.69.1.tar.gz.signature
├── ncs-5.5-cisco-iosxr-7.33.1.signed.bin
├── ncs-5.5-cisco-iosxr-7.33.1.tar.gz
├── ncs-5.5-cisco-iosxr-7.33.1.tar.gz.signature
├── README.signature
└── tailf.cer

0 directories, 10 files
htinoco@nso-dev-example:~/NSO-Files/neds$ 
</pre></div>
</div>
<p>Now that we have the tarball files of each NED, lets extract the contents in to the correct folder within our new NSO installation directory.</p>
<p>Lets just back to the directory of our NSO install:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">~/</span><span class="n">ncs</span><span class="o">-</span><span class="mf">5.5</span>
</pre></div>
</div>
<p>Move into the NEDS folder:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">packages</span><span class="o">/</span><span class="n">neds</span>
</pre></div>
</div>
<p>Extract the tarballs in this directory from the remote directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tar</span> <span class="o">-</span><span class="n">zxvf</span> <span class="o">~/</span><span class="n">NSO</span><span class="o">-</span><span class="n">Files</span><span class="o">/</span><span class="n">neds</span><span class="o">/</span><span class="n">ncs</span><span class="o">-</span><span class="mf">5.5</span><span class="o">-</span><span class="n">cisco</span><span class="o">-</span><span class="n">iosxr</span><span class="o">-</span><span class="mf">7.33.1</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span> 
<span class="n">tar</span> <span class="o">-</span><span class="n">zxvf</span> <span class="o">~/</span><span class="n">NSO</span><span class="o">-</span><span class="n">Files</span><span class="o">/</span><span class="n">neds</span><span class="o">/</span><span class="n">ncs</span><span class="o">-</span><span class="mf">5.5</span><span class="o">-</span><span class="n">cisco</span><span class="o">-</span><span class="n">ios</span><span class="o">-</span><span class="mf">6.69.1</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span> 
</pre></div>
</div>
<p>We should now have a total of 12 directories, with the two new additional NEDs.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>htinoco@nso-dev-example:~/ncs-5.5/packages/neds$ tree -L 1
.
├── a10-acos-cli-3.0
├── alu-sr-cli-3.4
├── cisco-asa-cli-6.6
├── cisco-ios-cli-3.0
├── cisco-ios-cli-3.8
├── cisco-ios-cli-6.69
├── cisco-iosxr-cli-3.0
├── cisco-iosxr-cli-3.5
├── cisco-iosxr-cli-7.33
├── cisco-nx-cli-3.0
├── dell-ftos-cli-3.0
└── juniper-junos-nc-3.0

12 directories, 0 files
</pre></div>
</div>
<p>We have successfully installed our NEDs.</p>
</section>
<section id="creating-local-instance-of-nso">
<h2>Creating Local Instance of NSO<a class="headerlink" href="#creating-local-instance-of-nso" title="Permalink to this heading"></a></h2>
<p>Our local installation allows us to have several NSO instances. We will create an example
instance.</p>
<p>Use the ‘ncs-setup’ command to create a new NSO instance.
–package is used to specify the NEDS
–dest flag is used to specifcy a directory for the new nso-instance.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ncs-setup<span class="w"> </span>--package<span class="w"> </span>~/ncs-5.5/packages/neds/cisco-ios-cli-6.69/<span class="w"> </span><span class="se">\</span>
--package<span class="w"> </span>~/ncs-5.5/packages/neds/cisco-iosxr-cli-7.33/<span class="w"> </span><span class="se">\</span>
--dest<span class="w"> </span>example-nso-instance
</pre></div>
</div>
</section>
<section id="starting-nso-instance">
<h2>Starting NSO Instance<a class="headerlink" href="#starting-nso-instance" title="Permalink to this heading"></a></h2>
<p>It’s important to navigate to the folder of the new NSO instance.
From our example above, we created a new directory called ‘example-nso-instance’</p>
<p>cd into this directory and run the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ncs
</pre></div>
</div>
<p>That’s it!</p>
</section>
<section id="access-the-nso-instance">
<h2>Access the NSO Instance<a class="headerlink" href="#access-the-nso-instance" title="Permalink to this heading"></a></h2>
<p>If you don’t remember the IP of the server, simply do the following:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ip<span class="w"> </span>addr<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>inet
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>htinoco@nso-dev-example:~/ncs-run$<span class="w"> </span>ip<span class="w"> </span>addr<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>inet
<span class="w">    </span>inet<span class="w"> </span><span class="m">127</span>.0.0.1/8<span class="w"> </span>scope<span class="w"> </span>host<span class="w"> </span>lo
<span class="w">    </span>inet6<span class="w"> </span>::1/128<span class="w"> </span>scope<span class="w"> </span>host<span class="w"> </span>
<span class="w">    </span>inet<span class="w"> </span><span class="m">192</span>.168.0.54/23<span class="w"> </span>brd<span class="w"> </span><span class="m">192</span>.168.1.255<span class="w"> </span>scope<span class="w"> </span>global<span class="w"> </span>dynamic<span class="w"> </span>ens160
</pre></div>
</div>
<p>The local install should be reachable at http://x.x.x.x:8080/login.html.</p>
<p>So, based on our example.. open a web browser and go to the following address:</p>
<p>http://192.168.0.54:8080/login.html</p>
</section>
<section id="credentials">
<h2>Credentials<a class="headerlink" href="#credentials" title="Permalink to this heading"></a></h2>
<p>Default credentials are admin/admin.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Extras" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../../changelog.html" class="btn btn-neutral float-right" title="Changelog" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Hugo Tinoco.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>