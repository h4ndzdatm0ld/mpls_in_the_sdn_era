<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>3.7 Construct Xpath notation for a given node or instance of a node &mdash; Devnet SPAUTO 0.1.0 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Network Programmability Foundation" href="../Network%20Programmability%20Foundation/index.html" />
    <link rel="prev" title="3.6 Constructing a Python Script using RESTCONF with JSON for Cisco IOS-XE Devices" href="3.6%20Construct%20a%20Python%20script%20using%20RESTCONF%20with%20JSON.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Devnet SPAUTO
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../README.html">Readme</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Automation%20APIs%20and%20Protocols/index.html">Automation APIs and Protocols</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Network Device Programmability</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="3.6%20Construct%20a%20Python%20script%20using%20RESTCONF%20with%20JSON.html">3.6 Constructing a Python Script using RESTCONF with JSON for Cisco IOS-XE Devices</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">3.7 Construct Xpath notation for a given node or instance of a node</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Network%20Programmability%20Foundation/index.html">Network Programmability Foundation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Extras/index.html">Extras</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">Changelog</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../autoapi/index.html">API Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Devnet SPAUTO</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Network Device Programmability</a></li>
      <li class="breadcrumb-item active">3.7 Construct Xpath notation for a given node or instance of a node</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/spauto/Network Device Programmability/3.7 Construct Xpath notation for a given node or instance of a node.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="construct-xpath-notation-for-a-given-node-or-instance-of-a-node">
<h1>3.7 Construct Xpath notation for a given node or instance of a node<a class="headerlink" href="#construct-xpath-notation-for-a-given-node-or-instance-of-a-node" title="Permalink to this heading"></a></h1>
<section id="nodes">
<h2>Nodes<a class="headerlink" href="#nodes" title="Permalink to this heading"></a></h2>
<p>What is an XPath node? Basically, everything pertaining to a single XML document, starting from the root element. The primary XPath building block is a node. There are seven node types defined for XPath, [more info here](<a class="reference external" href="https://www.w3schools.com/xml/xpath_nodes.asp">XPath Nodes</a>.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Element
Attribute
Text
Namespace
Processing Instruction
Comment
Document
</pre></div>
</div>
<p>Every XML document is a tree of nodes, they all start from a root element. Between the nodes the connectivity is defined by various types of relationships.</p>
<ul class="simple">
<li><p>Parent: Each node besides the root element has a parent node. Each node can have only one parent node.</p></li>
<li><p>Children: Each node, including the root element, may have one or more children.</p></li>
<li><p>Siblings: All the children of the same parent are the siblings to each other.</p></li>
<li><p>Ancestors: All the parent nodes up to the root element (for example, parent, parent’s parent) are ancestors.</p></li>
<li><p>Descendants: All the nested children down to the all leafs (for example, children, children’s children) are descendants.</p></li>
</ul>
<p>When we speak of nodes, we must not think of network devices, as that was my original thought before I started to research this topic.</p>
<p>Now, there are a lot of concepts that we must know about XML, xpath to make sense. We must understand that all XML files start with a <code class="docutils literal notranslate"><span class="pre">root</span> <span class="pre">element</span></code>. This is a requirement. All documents start with this root element and form a Tree structure, by branching off into child elements which can then have more sub/child elements.</p>
<p>Another important term to get familiar with is Namespaces. XML provides Namespaces to avoid conflicts in duplicate nodes. Most likely namespaces carry a prefix behind it, like so:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;prefix:duplicate-nodename&gt;&lt;/prefix:duplicate-nodename&gt;</span>

<span class="nt">&lt;different-prefix:duplicate-nodename&gt;&lt;/different-prefix:duplicate-nodename&gt;</span>
</pre></div>
</div>
<p>Typically, namespaces will carry xmnls attributes about the namespace, with a URI declaration.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;prefix:duplicate-nodename</span><span class="w"> </span><span class="na">xmlns:f=</span><span class="s">&quot;https://www.spauto.com/node-information&quot;</span><span class="nt">&gt;&lt;/prefix:duplicate-nodename&gt;</span>
</pre></div>
</div>
<p>There are a lot of different terms to learn about XML, a refresher is always good. Some information can be found at <a class="reference external" href="https://www.w3schools.com/xml/default.asp">W3 - XML</a>.</p>
</section>
<section id="why-xpath">
<h2>Why XPath<a class="headerlink" href="#why-xpath" title="Permalink to this heading"></a></h2>
<p>I’ve worked at places where some of the core routers have easily crossed over 100,000 lines of configuration. The configuration adds up quick, when we are talking about hundreds of L3/L2VPNs, MPLS, Traffic Engineering, Segment Routing, BGP, dozens of line-cards on Service based routers such as Nokia 7x50’s or Cisco 8000s. Using xpath is a simple way to filter through all the noise and only get what you need out of all the different elements in an incredibly large (or not) configuration.</p>
</section>
<section id="nso">
<h2>NSO<a class="headerlink" href="#nso" title="Permalink to this heading"></a></h2>
<p>If you want to use the NSO available in this repository, feel free to do so to try this out.
You will need to have loaded device and synced them with NSO, before you access the configuration of the routers. NSO provides a output modifier to return a command as an <code class="docutils literal notranslate"><span class="pre">xpath</span> <span class="pre">expression.</span></code></p>
<p>The following example is from Devnet Labs</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>developer@ncs# show running-config devices device core-rtr01 config interface GigabitEthernet 0/0/0/1 ipv4 address | display xpath
/devices/device[name=&#39;core-rtr01&#39;]/config/cisco-ios-xr:interface/GigabitEthernet[id=&#39;0/0/0/1&#39;]/ipv4/address/ip 172.16.253.2
/devices/device[name=&#39;core-rtr01&#39;]/config/cisco-ios-xr:interface/GigabitEthernet[id=&#39;0/0/0/1&#39;]/ipv4/address/mask 255.255.255.248
developer@ncs#show
</pre></div>
</div>
<p>There is an additional tool to evaluate XPath expressions against the CDB data of NSO. You must enable it by turning on the <code class="docutils literal notranslate"><span class="pre">devtools</span></code></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>developer@ncs#<span class="w"> </span>devtools<span class="w"> </span><span class="nb">true</span>
</pre></div>
</div>
<p>Now you can use <code class="docutils literal notranslate"><span class="pre">xpath</span> <span class="pre">eval</span></code>.</p>
</section>
<section id="xpath-expressions">
<h2>XPath Expressions<a class="headerlink" href="#xpath-expressions" title="Permalink to this heading"></a></h2>
<p>We will be using XPath expressions in a way that an engineer would actually use them while crafting NETCONF rpc calls. A simple <code class="docutils literal notranslate"><span class="pre">containerlab</span></code> topology is provided to spin up an iosxr device.</p>
<p>All of this material will be stored in a folder called <code class="docutils literal notranslate"><span class="pre">xpath_scripts</span></code> in our project folder.
We’ll be using a NETCONF library that I developed for Nornir, <a class="reference external" href="https://github.com/h4ndzdatm0ld/nornir_netconf">Nornir Netconf</a></p>
<p>Lets get started!</p>
<p>TODO:</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="3.6%20Construct%20a%20Python%20script%20using%20RESTCONF%20with%20JSON.html" class="btn btn-neutral float-left" title="3.6 Constructing a Python Script using RESTCONF with JSON for Cisco IOS-XE Devices" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../Network%20Programmability%20Foundation/index.html" class="btn btn-neutral float-right" title="Network Programmability Foundation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Hugo Tinoco.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>